(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{13:function(e,t,n){e.exports={item:"ImageGalleryItem_item__YCmxA",image:"ImageGalleryItem_image__U1DEf"}},14:function(e,t,n){e.exports={overlay:"Modal_overlay__3BvOG",modal:"Modal_modal__2Ux_i"}},25:function(e,t,n){e.exports={button:"Button_button__182XO"}},27:function(e,t,n){e.exports={gallery:"ImageGallery_gallery__e2ZRP"}},33:function(e,t,n){},34:function(e,t,n){},6:function(e,t,n){e.exports={searchbar:"Searchbar_searchbar__228Tv",form:"Searchbar_form__2YSLp",button:"Searchbar_button__JkOPw",label:"Searchbar_label__1-pG6",input:"Searchbar_input__33bAH"}},78:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(8),o=n.n(r),i=(n(33),n(4)),s=(n(34),n(6)),u=n.n(s),l=n(5),b=n(1);function j(e){var t=e.onSubmit,n=Object(a.useState)(""),c=Object(i.a)(n,2),r=c[0],o=c[1];return Object(b.jsx)("header",{className:u.a.searchbar,children:Object(b.jsxs)("form",{className:u.a.form,onSubmit:function(e){if(e.preventDefault(),""===r)return Object(l.b)("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u0437\u0430\u043f\u0440\u043e\u0441");t(r)},children:[Object(b.jsx)("button",{type:"submit",className:u.a.button,children:Object(b.jsx)("span",{className:u.a.label,children:"Search"})}),Object(b.jsx)("input",{className:u.a.input,type:"text",placeholder:"Search images and photos",onChange:function(e){var t=e.currentTarget.value.trim();o(t)},value:r})]})})}var d=n(16),f=n(13),h=n.n(f);function m(e){var t=e.url,n=e.alt,a=e.index,c=e.onClick;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("li",{className:h.a.item,onClick:function(){return c(a)},children:Object(b.jsx)("img",{src:t,alt:n,className:h.a.image,loading:"lazy"})},a)})}var O=n(25),p=n.n(O);function x(e){var t=e.onClick;return Object(b.jsx)("button",{type:"button",onClick:t,className:p.a.button,children:"Load more"})}var g=n(26),v=n.n(g),_=n(14),y=n.n(_);function S(e){var t=e.src,n=e.alt,c=e.onClose;Object(a.useEffect)((function(){var e=function(e){"Escape"===e.code&&c()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[c]);return Object(b.jsxs)("div",{className:y.a.overlay,onClick:function(e){e.currentTarget===e.target&&c()},children:[Object(b.jsx)("div",{className:y.a.modal,children:Object(b.jsx)("img",{src:t,alt:n,width:"1024",height:"768"})}),Object(b.jsx)("button",{type:"button",onClick:c,children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})}n(56);var w=n(27),k=n.n(w),C=n(15),N=n.n(C),E=n(28),I=n(10),L=n.n(I);L.a.defaults.baseURL="https://pixabay.com/api/",L.a.defaults.params={key:"22441039-e3c3a22ef42346706974d6393",image_type:"photo",orientation:"horizontal",per_page:12};var F=function(){var e=Object(E.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("",{params:{q:t,page:n}}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),G={fetchPhotoes:F};function U(e){var t=e.query,n=Object(a.useState)(1),c=Object(i.a)(n,2),r=c[0],o=c[1],s=Object(a.useState)([]),u=Object(i.a)(s,2),j=u[0],f=u[1],h=Object(a.useState)(null),O=Object(i.a)(h,2),p=O[0],g=O[1],_=Object(a.useState)("idle"),y=Object(i.a)(_,2),w=y[0],C=y[1],N=Object(a.useState)(null),E=Object(i.a)(N,2),I=E[0],L=E[1],F=Object(a.useState)(!1),U=Object(i.a)(F,2),B=U[0],P=U[1],R=function(e,t){G.fetchPhotoes(e,t).then((function(e){var n=e.hits,a=e.totalHits;g(a),C("resolved"),f(1===t?n:function(e){return[].concat(Object(d.a)(e),Object(d.a)(n))})})).catch((function(){return C("rejected")})).finally((function(){return q()}))};Object(a.useEffect)((function(){t&&(C("pending"),R(t,r))}),[r]),Object(a.useEffect)((function(){o(1),f([]),C("pending"),R(t,1)}),[t]);var T=function(e){L(e),P(!0)},q=function(){window.scrollTo({top:1e3*r,behavior:"smooth"})},A=Number(p)!==j.length;return"idle"===w?Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."})}):"rejected"===w?l.b.error("\u0412\u0430\u0448 \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"):"resolved"===w?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("ul",{className:k.a.gallery,children:j.map((function(e,t){var n=e.webformatURL,a=e.tags;return Object(b.jsx)(m,{url:n,alt:a,index:t,onClick:T},t)}))}),A&&Object(b.jsx)(x,{onClick:function(){o((function(e){return e+1}))}}),B&&Object(b.jsx)(S,{src:j[I].largeImageURL,alt:j[I].tags,onClose:function(){P(!1),L(null)}})]}):"pending"===w?Object(b.jsx)(v.a,{type:"Circles",color:"#00BFFF",height:80,width:80}):void 0}n(77);function B(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(j,{onSubmit:function(e){c(e)}}),n.length>0&&Object(b.jsx)(U,{query:n}),Object(b.jsx)(l.a,{})]})}o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(B,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.edc454cb.chunk.js.map