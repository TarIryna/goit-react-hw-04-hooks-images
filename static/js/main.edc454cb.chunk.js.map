{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/ImageGallery/ImageGallery.module.css","components/Searchbar/Searchbar.module.css","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","services/pixabay-api.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["module","exports","Searchbar","onSubmit","useState","filter","setFilter","className","s","searchbar","form","e","preventDefault","toast","type","button","label","input","placeholder","onChange","value","currentTarget","trim","ImageGalleryItem","url","alt","index","onClick","item","src","image","loading","Button","Modal","onClose","useEffect","handleKeyDown","code","window","addEventListener","removeEventListener","overlay","target","modal","width","height","axios","defaults","baseURL","params","key","image_type","orientation","per_page","fetchPhotoes","query","page","a","get","q","then","responce","data","api","ImageGallery","setPage","photoes","setPhotoes","total","setTotal","status","setStatus","id","setId","showModal","setShowModal","getPhotoes","hits","totalHits","state","catch","finally","scroll","setImage","scrollTo","top","behavior","isNotLast","Number","length","error","gallery","map","webformatURL","tags","largeImageURL","color","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.edc454cb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ImageGalleryItem_item__YCmxA\",\"image\":\"ImageGalleryItem_image__U1DEf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__3BvOG\",\"modal\":\"Modal_modal__2Ux_i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__182XO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__e2ZRP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__228Tv\",\"form\":\"Searchbar_form__2YSLp\",\"button\":\"Searchbar_button__JkOPw\",\"label\":\"Searchbar_label__1-pG6\",\"input\":\"Searchbar_input__33bAH\"};","import PropTypes from 'prop-types';\r\nimport { useState } from 'react';\r\nimport s from './Searchbar.module.css';\r\nimport { toast } from 'react-toastify';\r\n\r\nexport default function Searchbar({ onSubmit }) {\r\n  const [filter, setFilter] = useState('');\r\n\r\n  const onChangeInput = e => {\r\n    const value = e.currentTarget.value.trim();\r\n    setFilter(value);\r\n  };\r\n\r\n  const onSubmitForm = e => {\r\n    e.preventDefault();\r\n    if (filter === '') {\r\n      return toast('Введите ваш запрос');\r\n    }\r\n    onSubmit(filter);\r\n  };\r\n\r\n  return (\r\n    <header className={s.searchbar}>\r\n      <form className={s.form} onSubmit={onSubmitForm}>\r\n        <button type=\"submit\" className={s.button}>\r\n          <span className={s.label}>Search</span>\r\n        </button>\r\n\r\n        <input\r\n          className={s.input}\r\n          type=\"text\"\r\n          placeholder=\"Search images and photos\"\r\n          onChange={onChangeInput}\r\n          value={filter}\r\n        />\r\n      </form>\r\n    </header>\r\n  );\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './ImageGalleryItem.module.css';\r\n\r\nexport default function ImageGalleryItem({ url, alt, index, onClick }) {\r\n  return (\r\n    <>\r\n      <li key={index} className={s.item} onClick={() => onClick(index)}>\r\n        <img src={url} alt={alt} className={s.image} loading=\"lazy\" />\r\n      </li>\r\n    </>\r\n  );\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  onClick: PropTypes.func,\r\n  url: PropTypes.string,\r\n  alt: PropTypes.string,\r\n  index: PropTypes.number,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Button.module.css';\r\n\r\nexport default function Button({ onClick }) {\r\n  return (\r\n    <button type=\"button\" onClick={onClick} className={s.button}>\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func,\r\n};\r\n","import { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Modal.module.css';\r\n\r\nexport default function Modal({ src, alt, onClose }) {\r\n  useEffect(() => {\r\n    const handleKeyDown = e => {\r\n      if (e.code === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, [onClose]);\r\n\r\n  const handleBackdropClick = e => {\r\n    if (e.currentTarget === e.target) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={s.overlay} onClick={handleBackdropClick}>\r\n      <div className={s.modal}>\r\n        <img src={src} alt={alt} width=\"1024\" height=\"768\" />\r\n      </div>\r\n      <button type=\"button\" onClick={onClose}>\r\n        Закрыть\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nModal.propTypes = {\r\n  src: PropTypes.string,\r\n  alt: PropTypes.string,\r\n  onClose: PropTypes.func,\r\n};\r\n","import axios from 'axios';\r\n\r\nconst KEY = '22441039-e3c3a22ef42346706974d6393';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\n\r\naxios.defaults.baseURL = BASE_URL;\r\naxios.defaults.params = {\r\n  key: KEY,\r\n  image_type: 'photo',\r\n  orientation: 'horizontal',\r\n  per_page: 12,\r\n};\r\nconst fetchPhotoes = async (query, page) => {\r\n  return await axios\r\n    .get('', {\r\n      params: {\r\n        q: query,\r\n        page,\r\n      },\r\n    })\r\n    .then(responce => responce.data);\r\n};\r\n\r\nconst api = {\r\n  fetchPhotoes,\r\n};\r\n\r\nexport default api;\r\n","import { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ImageGalleryItem from '../ImageGalleryItem';\r\nimport Button from '../Button';\r\nimport Loader from 'react-loader-spinner';\r\nimport Modal from '../Modal';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport { toast } from 'react-toastify';\r\nimport s from './ImageGallery.module.css';\r\nimport api from '../../services/pixabay-api';\r\n\r\nexport default function ImageGallery({ query }) {\r\n  const [page, setPage] = useState(1);\r\n  const [photoes, setPhotoes] = useState([]);\r\n  const [total, setTotal] = useState(null);\r\n  const [status, setStatus] = useState('idle');\r\n  const [id, setId] = useState(null);\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  const getPhotoes = (query, page) => {\r\n    api\r\n      .fetchPhotoes(query, page)\r\n      .then(({ hits, totalHits }) => {\r\n        setTotal(totalHits);\r\n        setStatus('resolved');\r\n        page === 1 ? setPhotoes(hits) : setPhotoes(state => [...state, ...hits]);\r\n      })\r\n      .catch(() => setStatus('rejected'))\r\n      .finally(() => scroll());\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!query) {\r\n      return;\r\n    }\r\n    setStatus('pending');\r\n    getPhotoes(query, page);\r\n  }, [page]);\r\n\r\n  useEffect(() => {\r\n    setPage(1);\r\n    setPhotoes([]);\r\n    setStatus('pending');\r\n    getPhotoes(query, 1);\r\n  }, [query]);\r\n\r\n  const onLoadMore = () => {\r\n    setPage(state => state + 1);\r\n  };\r\n\r\n  const openModal = () => {\r\n    setShowModal(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setShowModal(false);\r\n    setId(null);\r\n  };\r\n\r\n  const setImage = index => {\r\n    setId(index);\r\n    openModal();\r\n  };\r\n\r\n  const scroll = () => {\r\n    window.scrollTo({\r\n      top: 1000 * page,\r\n      behavior: 'smooth',\r\n    });\r\n  };\r\n\r\n  const isNotLast = Number(total) !== photoes.length ? true : false;\r\n  if (status === 'idle') {\r\n    return (\r\n      <div>\r\n        <p>Загружаем...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (status === 'rejected') {\r\n    return toast.error('Ваш запрос не найден');\r\n  }\r\n  if (status === 'resolved') {\r\n    return (\r\n      <>\r\n        <ul className={s.gallery}>\r\n          {photoes.map(({ webformatURL, tags }, index) => (\r\n            <ImageGalleryItem\r\n              key={index}\r\n              url={webformatURL}\r\n              alt={tags}\r\n              index={index}\r\n              onClick={setImage}\r\n            />\r\n          ))}\r\n        </ul>\r\n        {isNotLast && <Button onClick={onLoadMore} />}\r\n        {showModal && (\r\n          <Modal src={photoes[id].largeImageURL} alt={photoes[id].tags} onClose={closeModal} />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n  if (status === 'pending') {\r\n    return <Loader type=\"Circles\" color=\"#00BFFF\" height={80} width={80} />;\r\n  }\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  filter: PropTypes.string,\r\n};\r\n","import { useState } from 'react';\nimport './App.css';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default function App() {\n  const [filter, setFilter] = useState('');\n\n  const onSearchBtn = query => {\n    setFilter(query);\n  };\n\n  return (\n    <div className=\"App\">\n      <Searchbar onSubmit={onSearchBtn} />\n      {filter.length > 0 && <ImageGallery query={filter} />}\n      <ToastContainer />\n    </div>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}